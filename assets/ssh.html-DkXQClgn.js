import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,o as t}from"./app-LXOurUa9.js";const n={};function l(h,s){return t(),e("div",null,[...s[0]||(s[0]=[a(`<blockquote><p>该文于2022-11-10发布在<a href="https://blog.csdn.net/weixin_52341477/article/details/127785396" target="_blank" rel="noopener noreferrer">CSDN</a>，2025年11月3日同步至此。</p></blockquote><p><a href="http://t.csdn.cn/stKHD" target="_blank" rel="noopener noreferrer">ssh配置免密登录</a></p><h2 id="_1-安装" tabindex="-1"><a class="header-anchor" href="#_1-安装"><span>1. 安装</span></a></h2><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">apt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">get update </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 更新软件列表</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">apt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">get install openssh</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 控制别的服务器用</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">apt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">get install openssh</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">server </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 被别的机器控制用</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-ssh命令" tabindex="-1"><a class="header-anchor" href="#_2-ssh命令"><span>2. ssh命令</span></a></h2><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看ssh状态</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">service ssh status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动ssh服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">service ssh start</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">或</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">init.d</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ssh start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启ssh服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">service ssh restart</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">或者</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">init.d</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ssh restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">停止ssh服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">service ssh stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多信息可以查看<code>/etc/init.d/ssh</code>、<code>/etc/ssh</code>或<code>ssh --help</code></p><h2 id="_3-配置sshd-config文件" tabindex="-1"><a class="header-anchor" href="#_3-配置sshd-config文件"><span>3. 配置sshd_config文件</span></a></h2><p>文件路径：<code>/etc/ssh/sshd_config</code></p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#PermitRootLogin prohibit-password 给这一行注释掉</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">PermitRootLogin yes </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 允许root用户登录</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，要么准确找到原文中的内容并改掉，要么直接加在配置文件的末尾，放在文件开头的话会被文件后面的这两个原本的配置覆盖掉，以至于不生效。</p><p>修改完后重启<code>service ssh restart</code>。</p><h2 id="_3-设置开机启动" tabindex="-1"><a class="header-anchor" href="#_3-设置开机启动"><span>3. 设置开机启动</span></a></h2><p><strong>用系统自带功能设置：</strong></p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">systemctl enable ssh </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置开机自启</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">systemctl disable ssh </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 取消开机自启</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>实际服务器环境下机器是很少重启的，所以最好再手动配置一个启动脚本。</p><p><strong>示例</strong><br><code>/root/ssh_auto.sh</code></p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">LOGTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">$</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(date </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;+%Y-%m-%d %H:%M:%S&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">$</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LOGTIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">] startup run...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">run.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">service ssh start &gt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">run.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">chmod </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">x ssh_auto.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后在<code>/root/.bashrc</code>中添加<code>. /root/ssh_auto.sh</code>。这样配置的话每打开一个<code>Shell</code>都会执行一次。<br> 也可以根据情况，将脚本启动命令放到其它位置。具体可参考：<a href="http://t.csdn.cn/ry2TW" target="_blank" rel="noopener noreferrer">Linux环境变量详解</a></p>`,20)])])}const d=i(n,[["render",l]]),k=JSON.parse('{"path":"/docs/tools/ssh.html","title":"SSh","lang":"zh-CN","frontmatter":{"title":"SSh","isOriginal":true,"icon":"mdi:ssh","date":"2022-11-10T00:00:00.000Z","tag":["Linux","Ubuntu","ssh"],"description":"该文于2022-11-10发布在CSDN，2025年11月3日同步至此。 ssh配置免密登录 1. 安装 2. ssh命令 更多信息可以查看/etc/init.d/ssh、/etc/ssh或ssh --help 3. 配置sshd_config文件 文件路径：/etc/ssh/sshd_config 注意，要么准确找到原文中的内容并改掉，要么直接加在配...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SSh\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-11-10T00:00:00.000Z\\",\\"dateModified\\":\\"2025-11-04T13:24:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"itsven\\",\\"url\\":\\"https://docs.itsven.cn\\"}]}"],["meta",{"property":"og:url","content":"https://docs.itsven.cn/docs/tools/ssh.html"}],["meta",{"property":"og:site_name","content":"itsven"}],["meta",{"property":"og:title","content":"SSh"}],["meta",{"property":"og:description","content":"该文于2022-11-10发布在CSDN，2025年11月3日同步至此。 ssh配置免密登录 1. 安装 2. ssh命令 更多信息可以查看/etc/init.d/ssh、/etc/ssh或ssh --help 3. 配置sshd_config文件 文件路径：/etc/ssh/sshd_config 注意，要么准确找到原文中的内容并改掉，要么直接加在配..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-04T13:24:58.000Z"}],["meta",{"property":"article:tag","content":"ssh"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2022-11-10T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-04T13:24:58.000Z"}]]},"git":{"createdTime":1762175385000,"updatedTime":1762262698000,"contributors":[{"name":"svenzhi","username":"svenzhi","email":"svenzhi@163.com","commits":3,"url":"https://github.com/svenzhi"}],"changelog":[{"hash":"48ae63b683077c4412f969ae8717edd211122650","time":1762262698000,"email":"svenzhi@163.com","author":"svenzhi","message":"front matter添加isOriginal"},{"hash":"d7f2e6b34eb5553589633612d2a10398cfae8195","time":1762178849000,"email":"svenzhi@163.com","author":"svenzhi","message":"update(tools/ssh.md): 更正SSH文章错别字"},{"hash":"a497250e8af7e84520860fcc22a8c463cda0614e","time":1762175385000,"email":"svenzhi@163.com","author":"svenzhi","message":"创建项目并完成主题基础配置"}]},"readingTime":{"minutes":1.32,"words":397},"filePathRelative":"docs/tools/ssh.md","excerpt":"<blockquote>\\n<p>该文于2022-11-10发布在<a href=\\"https://blog.csdn.net/weixin_52341477/article/details/127785396\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">CSDN</a>，2025年11月3日同步至此。</p>\\n</blockquote>\\n<p><a href=\\"http://t.csdn.cn/stKHD\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">ssh配置免密登录</a></p>\\n<h2>1. 安装</h2>","autoDesc":true}');export{d as comp,k as data};
